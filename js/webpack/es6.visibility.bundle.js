(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,n=function(t,i){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(n)?n:String(n)),r)}var n}var i={},o=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i[t]=this,this.arrObjs=o}var o,r;return o=e,(r=[{key:"scrSize",get:function(){return{width:screen.width||screen.availWidth,height:screen.height||screen.availHeight}}},{key:"winSize",get:function(){return{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}}},{key:"docSize",get:function(){var e=document.documentElement,t=document.body,i=Math.max(t.scrollHeight||t.clientHeight,e.scrollHeight||e.clientHeight),o=e.scrollTop||document.scrollingElement.scrollTop;return{docHeight:i,docScrollTop:o,docScrollBottom:i-o-window.innerHeight}}},{key:"getObjSize",value:function(e){if(e){var t=document.querySelector(e);if(t){for(var i=0,o=0,r=t;r;)i+=r.offsetLeft,o+=r.offsetTop,r=r.offsetParent;return{offsetLeft:i,offsetTop:o,offsetHeight:t.offsetHeight,offsetWidth:t.offsetWidth}}}}},{key:"getDOMRect",value:function(e){if(e){var t=document.querySelector(e);if(t){var i=t.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}}}},{key:"isHorizontal",value:function(e){var t=this.getObjSize(e[0]),i=this.getObjSize(e[1]),o=this.winSize.innerWidth-t.offsetLeft+i.offsetWidth;return this.winSize.innerWidth<=o}},{key:"isVertical",value:function(e,t,i,o){var r=t?this.getObjSize(t).offsetHeight+(i||0):0,n=this.getObjSize(e[0]).offsetTop-r,l=this.docSize.docHeight-this.getObjSize(e[1]).offsetTop+r-this.getObjSize(e[1]).offsetHeight,c=this.docSize.docScrollTop+(o?i:0)>=n,f=l<=(o?this.docSize.docScrollBottom-this.winSize.innerHeight:this.docSize.docScrollBottom);return c&&f}},{key:"updateVisibility",value:function(e){var t=this;e.arrVisible=[],e.qSelector=document.querySelector(e.selector),e.visible=!1,e.offsetTop=this.getObjSize(e.areas[0][0]).offsetTop,e.areas.forEach((function(i,o){e.horizVisible=!e.horizontal||!t.isHorizontal(i),t.isVertical(i,e.selector,e.offsetExtra,e.peekaboo)?(e.arrVisible[o]=!0,e.visible=!0):(e.arrVisible[o]=!1,e.visible=!1)})),e.areas.length>=e.arrVisible.length&&e.arrVisible.some((function(e){return 1==e}))&&(e.visible=!0),e.areas.length>=e.arrVisible.length&&e.arrVisible.every((function(e){return 0==e}))&&(e.visible=!1),e.callback&&e.callback()}},{key:"forEachObj",value:function(){var e=this;this.arrObjs.forEach((function(t){updateVisibility.call(e,t)}))}},{key:"start",value:function(){var e=this;["DOMContentLoaded","scroll","resize"].forEach((function(t){return window.addEventListener(t,(function(){return e.forEachObj()}))}))}},{key:"event",value:function(e,t,i){var o=this;"[object Array]"===Object.prototype.toString.call(this.arrObjs)&&setTimeout((function(){o.arrObjs.filter(t).forEach((function(t){t.qSelector&&t.qSelector.addEventListener(e,(function(e){e.preventDefault(),i&&i.call(null,t,o)}))}))}),100)}}])&&t(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),e}();window.viewSelf=i,window.Visibility=o})();